“Only change theme/colors, keep layout identical”

Goal: Add a Light theme that ONLY changes colors. Do not alter JSX structure, grids, spacing, typography sizes, shadows, or border radii. The existing dark layout must remain pixel-for-pixel identical except for color.

Hard rules

❌ Do not add/remove wrappers.

❌ Do not change any Tailwind classes other than color utilities (and only if strictly necessary; prefer CSS overrides).

✅ Use an HTML data-theme attribute to switch palettes.

✅ Default to dark until user clicks Settings → Light.

✅ Persist preference in localStorage.theme.

1) Theme switch via data-theme (no component edits)

Create components/theme/ThemeProvider.tsx:

"use client";
import { createContext, useContext, useEffect, useState } from "react";

type Theme = "dark" | "light";
const Ctx = createContext<{ theme: Theme; setTheme: (t: Theme) => void }>({ theme: "dark", setTheme: () => {} });

export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme] = useState<Theme>("dark");

  useEffect(() => {
    const stored = (localStorage.getItem("theme") as Theme) || "dark";
    setTheme(stored);
    document.documentElement.setAttribute("data-theme", stored);
  }, []);

  useEffect(() => {
    localStorage.setItem("theme", theme);
    document.documentElement.setAttribute("data-theme", theme);
  }, [theme]);

  return <Ctx.Provider value={{ theme, setTheme }}>{children}</Ctx.Provider>;
}
export const useTheme = () => useContext(Ctx);


Wrap app (only file to touch structurally):

// app/layout.tsx (or pages/_app.tsx equivalent)
import { ThemeProvider } from "@/components/theme/ThemeProvider";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" data-theme="dark"> {/* default */}
      <body>
        <ThemeProvider>{children}</ThemeProvider>
      </body>
    </html>
  );
}

2) Settings → “Light” button is the ONLY control

In app/settings/page.tsx (or existing Settings screen), wire two buttons. Do not add toggles elsewhere.

"use client";
import { useTheme } from "@/components/theme/ThemeProvider";

export default function SettingsPage() {
  const { theme, setTheme } = useTheme();
  return (
    <div className="mx-auto max-w-3xl px-6 py-8">
      <h1 className="text-2xl font-bold">Settings</h1>
      <section className="mt-6 rounded-2xl border p-5">
        <h2 className="text-sm font-semibold">Theme</h2>
        <div className="mt-4 flex gap-3">
          <button data-testid="theme-light" onClick={() => setTheme("light")} className={`rounded border px-4 py-2 ${theme==="light"?"border-violet-500":"border-slate-300"}`}>Light</button>
          <button data-testid="theme-dark" onClick={() => setTheme("dark")} className={`rounded border px-4 py-2 ${theme==="dark"?"border-violet-500":"border-slate-300"}`}>Dark</button>
        </div>
      </section>
    </div>
  );
}

3) Color-only overrides (no JSX edits)

Add styles/theme-overrides.css and import it once in app/globals.css (bottom).

/* Import this file in globals.css: @import "./theme-overrides.css"; */

/* Base page/background/text */
@layer base {
  /* Dark remains as-is; Light overrides below */
  html[data-theme="light"] body {
    background: linear-gradient(to bottom, #ffffff, #f8fafc);   /* white → slate-50 */
    color: #0f172a; /* slate-900 */
  }

  /* App bar / headers that currently use border-b/bg opacity in dark */
  html[data-theme="light"] .border-b { border-color: #f1f5f9 !important; } /* slate-100 */
  html[data-theme="light"] .bg-white\/90,
  html[data-theme="light"] .bg-slate-900\/90,
  html[data-theme="light"] .backdrop-blur {
    background-color: rgba(255,255,255,0.9) !important;
  }

  /* Generic “card” sections: your Overview uses section.rounded-2xl.border.bg-* */
  html[data-theme="light"] section.rounded-2xl.border {
    background-color: #ffffff !important;   /* white surface */
    border-color: #e2e8f0 !important;       /* slate-200 */
    box-shadow: 0 1px 2px rgba(0,0,0,.04), 0 8px 24px rgba(0,0,0,.06);
  }

  /* Card dividers */
  html[data-theme="light"] .divide-y > :not([hidden]) ~ :not([hidden]) {
    border-color: #f1f5f9 !important;       /* slate-100 */
  }

  /* Text tones */
  html[data-theme="light"] .text-slate-100,
  html[data-theme="light"] .text-slate-200,
  html[data-theme="light"] .text-gray-100 { color: #0f172a !important; } /* headings → slate-900 */
  html[data-theme="light"] .text-slate-400,
  html[data-theme="light"] .text-slate-500 { color: #64748b !important; } /* muted */
  html[data-theme="light"] .text-slate-300 { color: #334155 !important; }

  /* Backgrounds frequently used in dark UI become light surfaces */
  html[data-theme="light"] .bg-slate-950,
  html[data-theme="light"] .bg-slate-900,
  html[data-theme="light"] .bg-gray-900 { background-color: #ffffff !important; }

  /* Borders used in dark become light */
  html[data-theme="light"] .border-slate-800,
  html[data-theme="light"] .border-slate-700 { border-color: #e2e8f0 !important; }

  /* Progress bar gradient stays brand-colored */
  /* Bullet dots already readable; no change needed */

  /* Keep spacing/typography/shadows UNCHANGED — color only. */
}


Important: Do not modify any component files to add classes. These overrides target the existing selectors already present on the Overview (e.g., section.rounded-2xl.border, header.border-b, .divide-y).

In app/globals.css, add:

@import "./theme-overrides.css";

4) QA (must pass)

 No component diffs except layout.tsx and new Settings wiring; all JSX structures unchanged.

 Spacing (p-*, m-*), layout (grid, flex, gap), typography sizes, and shadows are identical.

 Switching Settings → Light only changes colors (backgrounds, text, borders, surfaces).

 Refresh persists the chosen theme (via localStorage.theme and data-theme on <html>).

 Dark theme remains exactly as it was before when data-theme="dark".

Deliverables

components/theme/ThemeProvider.tsx

app/layout.tsx updated to include provider and data-theme="dark" default

app/settings/page.tsx (buttons)

styles/theme-overrides.css + @import in globals.css

If any component still shows dark colors in Light, extend theme-overrides.css with the smallest possible additional selector targeting just that color utility; do not touch layout/spacing.